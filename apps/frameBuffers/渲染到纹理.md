# 渲染到纹理

  使用webgl渲染三维图形，然后将渲染结果作为纹理贴到另一个三维物体上去。
  
  实际上，把渲染结果作为纹理使用，就是动态的生成图像，而不是向服务器加载外部图像。
  在纹理图像被贴上图形之前，我们还可以对其进行一些额外的处理，例如生成动态模糊或景深效果。

  ## 帧缓冲区对象和渲染缓冲区对象

  在默认情况下，WebGL在颜色缓冲区中进行绘图，在开启隐藏面消除功能时，还会用到深度缓冲区。总之，绘制结果图像是存储在颜色缓冲区中的。

  `帧缓冲区对象`可以用来代替颜色缓冲区或深度缓冲区，在`帧缓冲区`中进行绘制的过程叫做`离屏绘制`。

    帧缓冲区对象==>颜色关联对象 + 深度关联对象 + 模板关联对象



## 如何实现渲染到纹理

我们希望把WebGL渲染出的图像作为纹理使用，那么就需要将纹理对象作为颜色关联对象关联到帧缓冲区对象上，然后再帧缓冲区中进行绘制。此时颜色关联对象（即纹理对象）就替代了颜色缓冲区。此时仍然需要进行隐藏面消除，所以我们又创建了一个渲染缓冲区对象来作为帧缓冲区的深度关联对象，以替代深度缓冲区。


    颜色关联对象==> 纹理对象 绘图区域
    深度关联对象==> 渲染缓冲区对象 绘图区域

### 实现帧缓冲区配置的8个步骤
- 创建帧缓冲区对象  （ `gl.createFramebffer()` ）
- 创建纹理对象并设置其尺寸和参数 （ `gl.createTexture()`、`gl.bindTexture()`、`gl.texImage2D()`、`gl.Parameteri()` ）
- 创建渲染缓冲区对象 ( `gl.createRenderbuffer()` )
- 绑定渲染缓冲区对象并设置其尺寸 （ `gl.bindRenderbuffer()`、`gl.renderbufferStorage()` ）
- 将帧缓冲区的颜色关联对象指定一个纹理对象 ( `gl.frambufferTexture2D()` )
- 将帧缓冲区的深度关联对象指定为一个渲染缓冲区对象( `gl.framebufferRenderbuffer()` )
- 检查帧缓冲区是否正确配置 ( `gl.checkFramebufferStatus()` )
- 在帧缓冲区中进行绘制 （ `gl.bindFramebuffer()` ）